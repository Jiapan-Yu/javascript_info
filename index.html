<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <style>
    #field {
      width: 200px;
      height: 150px;
      border: 10px solid black;
      background-color: #00FF00;
      overflow: hidden;
      position: relative;
    }

    #field:hover {
      cursor: pointer;
    }

    #ball {
      position: absolute;
      top: 0;
      right: auto;
      bottom: auto;
      left: 0;
      transition: top 1s ease, right 1s ease, bottom 1s ease, left 1s ease;
    }
  </style>
</head>

<body style="height:2000px">

  Click on a field to move the ball there.
  <br> The ball should never leave the field.


  <div id="field">
    <img src="https://en.js.cx/clipart/ball.svg" id="ball"> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    . . . . . . . . .
    . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . . . . . . . .
  </div>

  <script>
    field.onclick = function (event) {
      console.log('clientX: ', event.clientX)
      console.log('clientY: ', event.clientY)

      console.log('field rect: ', field.getBoundingClientRect())
      // event.clientX
      let xMin = field.getBoundingClientRect().left + 10 + ball.width / 2
      console.log('xMin: ', xMin)
      let xMax = field.getBoundingClientRect().right - 10 - ball.width / 2
      console.log('xMax: ', xMax)
      // event.clientY
      let yMin = field.getBoundingClientRect().top + 10 + ball.width / 2
      console.log('yMin: ', yMin)
      let yMax = field.getBoundingClientRect().bottom - 10 - ball.width / 2
      console.log('yMax: ', yMax)

      // 左上角
      if (event.clientX < xMin && event.clientY < yMin) {
        ball.style.left = '0px'
        ball.style.right = 'auto'
        ball.style.top = '0px'
        ball.style.bottom = 'auto'
        return
      }
      // 左下角
      if (event.clientX < xMin && event.clientY > yMax) {
        ball.style.left = '0px'
        ball.style.right = 'auto'
        ball.style.bottom = '0px'
        ball.style.top = 'auto'
        return
      }
      // 右上角
      if (event.clientX > xMax && event.clientY < yMin) {
        ball.style.right = '0px'
        ball.style.left = `auto`
        ball.style.top = '0px'
        ball.style.bottom = `auto`
        return
      }
      // 右下角
      if (event.clientX > xMax && event.clientY > yMax) {
        ball.style.right = '0px'
        ball.style.left = `auto`
        ball.style.bottom = '0px'
        ball.style.top = `auto`
        return
      }


      if (event.clientX < xMin) {
        ball.style.left = `${xMin - ball.width / 2}px`
        ball.style.top = `${event.clientY - ball.width / 2}px`
        return
      }
      if (event.clientX > xMax) {
        ball.style.left = `${xMax - ball.width / 2}px`
        ball.style.top = `${event.clientY - ball.width / 2}px`
        return
      }
      if (event.clientY < yMin) {
        ball.style.top = `${yMin - ball.width / 2}px`
        ball.style.left = `${event.clientX - ball.height / 2}px`
        return
      }
      if (event.clientY > yMax) {
        ball.style.top = `${yMax - ball.width / 2}px`
        ball.style.left = `${event.clientX - ball.height / 2}px`
        return
      }

      ball.style.left = `${event.clientX - xMin}px`;
      ball.style.top = `${event.clientY -yMin}px`;
    }

  /* console.log(ball.width)
  console.log(ball.height)
  console.log(field.clientWidth)
  console.log(field.clientHeight) */
  </script>

</body>

</html>